## http2 带给我们的好处
- 多路复用 ：一次TCP握手，多个同域并行请求，请求和响应`同时发送接受`，然后`再拼装组合`，不阻塞；
- 优先级和依赖性（Priority） ：可以请求的时候告知服务器端，资源分配权重，优先加载重要资源；
- 服务器推送（Server Push） ：根据客户端需求，`服务端主动推送资源`，减少请求耗时；

## 管道
“ HTTP 管道”技术实现了`客户端向服务器``并行`发送多个请求。而服务器也是可以`并行处理`多个请求的。这么一来，不就可以多路复用了吗？但是， HTTP/1.x 有严格的`串行返回响应`机制，通过 TCP 连接返回响应时，就是必须 one by one ，前一个响应没有完成，下一个响应就不能返回。所以使用“ HTTP 管道”技术时，万一第一个响应时间很长，那么后面的响应处理完了也无法发送，只能被缓存起来，占用服务器内存，这就是传说中的“队首阻塞”。

## http2 特性
### 二进制分帧
比如 header 帧（起始行，首部），data 帧（实体正文），都采用二进制编码，帧会带有编号，然后就可以根据编号组合

HTTP/2 同域名的所有通信都是在`一个 TCP 连接`上完成，这个连接可以承载任意数量的`双向数据流`。而每个数据流都是以`消息`的形式发送的，`消息由一个帧或多个帧组成`。

- 流：已建立的连接上的双向字节流
- 消息：与逻辑消息对应的完整的一系列数据帧
- 帧：HTTP/2 通信的最小单位，每个帧包含帧首部

## 首部压缩
用的是 HPACK 压缩，在服务器和客户端`各维护一个“首部表”`，表中用索引代表首部名，或者首部键 - 值对，上一次发送两端都会`记住已发送过哪些首部`，下一次发送只需要`传输差异的数据`，相同的数据直接用索引表示即可。

## 服务器推送
服务器可以对一个客户端请求发送多个响应。也就是说，除了对最初请求的响应外，服务器还可以额外`向客户端推送资源`。

在了解“二进制分帧层”的时候我们提到，“HTTP/2 规范规定了10种不同的帧”，其中有一种名为“PUSH_PROMISE”，就是在服务器推送的时候发送的。当客户端解析帧时，发现它是一个 PUSH_PROMISE 类型，便会准备接收服务端要推送的流。

## 优先级
HTTP/2 中，流可以有一个优先级属性（即“权重”）：

- 可以在 HEADERS 帧中包含优先级 priority 属性；
- 可以单独通过 PRIORITY 帧专门设置流的优先级属性。
流的优先级用于发起流的终端（客户端/服务器）向对端（接收的一方）表达需要多大比重的资源支持，但这只是一个建议，不能强制要求对端一定会遵守。

## 
